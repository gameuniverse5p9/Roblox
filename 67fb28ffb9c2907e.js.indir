(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67421,e=>{e.v({DragActive:"DragDropFile-module-scss-module__jVwwaa__DragActive",DragFileCatcher:"DragDropFile-module-scss-module__jVwwaa__DragFileCatcher",FormFileUpload:"DragDropFile-module-scss-module__jVwwaa__FormFileUpload",dragPulse:"DragDropFile-module-scss-module__jVwwaa__dragPulse",fadeAndScaleIn:"DragDropFile-module-scss-module__jVwwaa__fadeAndScaleIn",fadeAndScaleOut:"DragDropFile-module-scss-module__jVwwaa__fadeAndScaleOut",pulseBackground:"DragDropFile-module-scss-module__jVwwaa__pulseBackground",scaleIn:"DragDropFile-module-scss-module__jVwwaa__scaleIn",scaleOut:"DragDropFile-module-scss-module__jVwwaa__scaleOut"})},80537,e=>{e.v({Disabled:"AttachPromptImageButton-module-scss-module__Quh9uW__Disabled",ImageButton:"AttachPromptImageButton-module-scss-module__Quh9uW__ImageButton",fadeAndScaleIn:"AttachPromptImageButton-module-scss-module__Quh9uW__fadeAndScaleIn",fadeAndScaleOut:"AttachPromptImageButton-module-scss-module__Quh9uW__fadeAndScaleOut",pulseBackground:"AttachPromptImageButton-module-scss-module__Quh9uW__pulseBackground",scaleIn:"AttachPromptImageButton-module-scss-module__Quh9uW__scaleIn",scaleOut:"AttachPromptImageButton-module-scss-module__Quh9uW__scaleOut"})},81520,63079,47716,e=>{"use strict";var t=e.i(18050),r=e.i(932),n=e.i(7670),i=e.i(71645),o=e.i(78845);let a=()=>{let e,n=(0,r.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("svg",{width:o.DEFAULT_SIZE,height:o.DEFAULT_SIZE,viewBox:`0 0 ${o.DEFAULT_SIZE} ${o.DEFAULT_SIZE}`,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.66659 2H1.33325V14H2.66659H13.3333H14.6666V2H13.3333H2.66659ZM13.3333 3.33333V12.6667H2.66659V3.33333H13.3333ZM9.33325 6H7.99992V7.33333H6.66658V8.66667H5.33325V10H3.99992V11.3333H5.33325V10H6.66658V8.66667H7.99992V7.33333H9.33325V8.66667H10.6666V10H11.9999V8.66667H10.6666V7.33333H9.33325V6ZM5.33325 4.66667H3.99992V6H5.33325V4.66667Z"})}),n[0]=e):e=n[0],e};e.s(["ImageGalleryIcon",0,a],63079);var l=e.i(67421);function s(e){let o,s,c,d,p,m,v,f,h=(0,r.c)(31),{onSubmit:g,children:y,className:w,isDisabled:x,allowClickToSubmit:S,allowDragDrop:_,acceptedFileTypes:j,multipleFiles:b}=e,I=void 0!==x&&x,C=void 0===S||S,E=void 0===_||_,L=void 0===b||b,[P,R]=(0,i.useState)(!1),D=(0,i.useRef)(null),F=(0,i.useRef)(null),A=(0,i.useId)();h[0]!==I||h[1]!==g?(o=function(e){!I&&(e.preventDefault(),e.target.files&&e.target.files.length>0&&(g(e.target.files),D.current&&(D.current.value="")))},h[0]=I,h[1]=g,h[2]=o):o=h[2];let H=o;h[3]!==E||h[4]!==I||h[5]!==g?(s=()=>{if(!E)return;let e=function(e){if(!F.current)return!1;let t=F.current.getBoundingClientRect();return e.clientX>=t.left&&e.clientX<=t.right&&e.clientY>=t.top&&e.clientY<=t.bottom},t=function(t){if(!I&&E){if(t.preventDefault(),t.stopPropagation(),!e(t))return void R(!1);"dragenter"===t.type||"dragover"===t.type?R(!0):"dragleave"!==t.type||e(t)||R(!1)}},r=function(t){I||!E||(t.preventDefault(),t.stopPropagation(),e(t)&&(R(!1),t.dataTransfer?.files&&t.dataTransfer.files.length>0&&g(t.dataTransfer.files)))};return document.addEventListener("dragenter",t),document.addEventListener("dragleave",t),document.addEventListener("dragover",t),document.addEventListener("drop",r),()=>{document.removeEventListener("dragenter",t),document.removeEventListener("dragleave",t),document.removeEventListener("dragover",t),document.removeEventListener("drop",r)}},c=[I,E,g],h[3]=E,h[4]=I,h[5]=g,h[6]=s,h[7]=c):(s=h[6],c=h[7]),(0,i.useEffect)(s,c);let T=P&&l.default.DragActive;h[8]!==w||h[9]!==T?(d=(0,n.default)(l.default.FormFileUpload,w,T),h[8]=w,h[9]=T,h[10]=d):d=h[10];let M=`${A}-input-file-upload`;return h[11]!==j||h[12]!==H||h[13]!==I||h[14]!==L||h[15]!==M?(p=(0,t.jsx)("input",{ref:D,type:"file",id:M,multiple:L,onChange:H,disabled:I,accept:j}),h[11]=j,h[12]=H,h[13]=I,h[14]=L,h[15]=M,h[16]=p):p=h[16],h[17]!==C||h[18]!==E||h[19]!==y||h[20]!==P||h[21]!==A?(m=C&&!P&&(0,t.jsx)("label",{id:`${A}-label-file-upload`,htmlFor:`${A}-input-file-upload`,children:y||(0,t.jsxs)("section",{children:[E&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Drag and drop"}),(0,t.jsx)("p",{children:"or"})]}),(0,t.jsx)("span",{className:"upload-button",children:"Browse for Asset"}),(0,t.jsxs)("p",{children:["Files must be under ",(0,t.jsx)("strong",{children:"19MB"})]})]})}),h[17]=C,h[18]=E,h[19]=y,h[20]=P,h[21]=A,h[22]=m):m=h[22],h[23]!==E||h[24]!==P?(v=E&&P&&(0,t.jsxs)("div",{className:l.default.DragFileCatcher,children:[(0,t.jsx)(a,{}),(0,t.jsx)("p",{children:"Drop files here"})]}),h[23]=E,h[24]=P,h[25]=v):v=h[25],h[26]!==p||h[27]!==m||h[28]!==v||h[29]!==d?(f=(0,t.jsxs)("form",{ref:F,className:d,onSubmit:u,children:[p,m,v]}),h[26]=p,h[27]=m,h[28]=v,h[29]=d,h[30]=f):f=h[30],f}function u(e){return e.preventDefault()}e.s(["default",()=>s],81520);var c=e.i(86336),d=e.i(75570),p=e.i(80537);e.s(["AttachPromptImageButton",0,e=>{let o,l,s,u,m,v,f,h,g,y,w,x,S=(0,r.c)(28),{disabled:_,onFileSubmit:j,className:b,tooltipText:I,tooltipDelay:C,label:E}=e,L=void 0===C?500:C,P=void 0===E?"Upload image":E,R=(0,i.useRef)(null);S[0]!==j?(o=e=>{let t=e.target.files;t&&t.length>0&&j(t[0]),R.current&&(R.current.value="")},S[0]=j,S[1]=o):o=S[1];let D=o;S[2]!==_?(l=()=>{!_&&R.current&&R.current.click()},S[2]=_,S[3]=l):l=S[3];let F=l,A=_&&p.default.Disabled;S[4]!==b||S[5]!==A?(s=(0,n.default)(p.default.ImageButton,A,b),S[4]=b,S[5]=A,S[6]=s):s=S[6],S[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)(a,{}),S[7]=u):u=S[7],S[8]!==P?(m=(0,t.jsx)("span",{children:P}),S[8]=P,S[9]=m):m=S[9],S[10]===Symbol.for("react.memo_cache_sentinel")?(v={display:"none"},S[10]=v):v=S[10],S[11]!==D?(f=(0,t.jsx)("input",{ref:R,type:"file",onChange:D,accept:"image/*",style:v}),S[11]=D,S[12]=f):f=S[12],S[13]!==_||S[14]!==F||S[15]!==f||S[16]!==s||S[17]!==m?(h=(0,t.jsx)(c.Trigger,{asChild:!0,children:(0,t.jsxs)("button",{className:s,onClick:F,disabled:_,type:"button","aria-label":"Upload and attach an image",children:[u,m,f]})}),S[13]=_,S[14]=F,S[15]=f,S[16]=s,S[17]=m,S[18]=h):h=S[18];let H=I??"Attach image";return S[19]!==H?(g=(0,t.jsx)("p",{children:H}),S[19]=H,S[20]=g):g=S[20],S[21]===Symbol.for("react.memo_cache_sentinel")?(y=(0,t.jsx)(c.Arrow,{className:d.default.TooltipArrow}),S[21]=y):y=S[21],S[22]!==g?(w=(0,t.jsx)(c.Portal,{children:(0,t.jsxs)(c.Content,{className:d.default.Tooltip,sideOffset:5,side:"top",children:[g,y]})}),S[22]=g,S[23]=w):w=S[23],S[24]!==h||S[25]!==w||S[26]!==L?(x=(0,t.jsxs)(c.Root,{delayDuration:L,children:[h,w]}),S[24]=h,S[25]=w,S[26]=L,S[27]=x):x=S[27],x}],47716)},79473,e=>{"use strict";let t=e=>r=>{try{let n=e(r);if(n instanceof Promise)return n;return{then:e=>t(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:r=>t(r)(e)}}},r=(e,r)=>(n,i,o)=>{let a,l={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let n=e=>null===e?null:JSON.parse(e,void 0),i=null!=(t=r.getItem(e))?t:null;return i instanceof Promise?i.then(n):n(i)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...r},s=!1,u=new Set,c=new Set,d=l.storage;if(!d)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...e)},i,o);let p=()=>{let e=l.partialize({...i()});return d.setItem(l.name,{state:e,version:l.version})},m=o.setState;o.setState=(e,t)=>(m(e,t),p());let v=e((...e)=>(n(...e),p()),i,o);o.getInitialState=()=>v;let f=()=>{var e,r;if(!d)return;s=!1,u.forEach(e=>{var t;return e(null!=(t=i())?t:v)});let o=(null==(r=l.onRehydrateStorage)?void 0:r.call(l,null!=(e=i())?e:v))||void 0;return t(d.getItem.bind(d))(l.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];else{if(l.migrate){let t=l.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[r,o]=e;if(n(a=l.merge(o,null!=(t=i())?t:v),!0),r)return p()}).then(()=>{null==o||o(a,void 0),a=i(),s=!0,c.forEach(e=>e(a))}).catch(e=>{null==o||o(void 0,e)})};return o.persist={setOptions:e=>{l={...l,...e},e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>f(),hasHydrated:()=>s,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},l.skipHydration||f(),a||v};e.s(["persist",()=>r])},95187,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={callServer:function(){return o.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return a.findSourceMapURL}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=e.r(32120),a=e.r(92245),l=e.r(35326)},80380,33071,85847,14978,e=>{"use strict";var t=e.i(12598),r=e.i(54452),n=e.i(18566),i=e.i(71645),o=e.i(92599),a=e.i(29011),l=e.i(73776),s=e.i(68834),u=e.i(79473);let c=(0,s.create)()((0,u.persist)(e=>({collapsedFolders:{},activeFiles:{},toggleFolder:(t,r)=>e(e=>{let n=e.collapsedFolders[t]||[],i=n.includes(r);return{collapsedFolders:{...e.collapsedFolders,[t]:i?n.filter(e=>e!==r):[...n,r]}}}),setActiveFile:(t,r)=>e(e=>({activeFiles:{...e.activeFiles,[t]:r}}))}),{name:"rosebud_project-ui"}));e.s(["useProjectUIStore",0,c],33071);let d=(0,s.create)(e=>({projects:{},createProjectSlice:(t,r,n)=>e(i=>{let o,a;return{projects:{...i.projects,[t]:i.projects[t]||(o=c.getState().activeFiles[t],a=(r,n)=>e(e=>({projects:{...e.projects,[t]:{...e.projects[t],[r]:n}}})),{runtimeError:null,setRuntimeError:e=>a("runtimeError",e),hasValidationError:!1,setHasValidationError:e=>a("hasValidationError",e),view:"preview",setView:e=>a("view",e),isValidating:!1,setIsValidating:e=>a("isValidating",e),isFirstLoad:!0,setIsFirstLoad:e=>a("isFirstLoad",e),fakeMessage:void 0,setFakeMessage:e=>a("fakeMessage",e),canvasRerenderKey:0,incrementCanvasRerenderKey:()=>e(e=>({projects:{...e.projects,[t]:{...e.projects[t],canvasRerenderKey:e.projects[t]?.canvasRerenderKey+1}}})),editingFileId:null,setEditingFileId:e=>a("editingFileId",e),editingFileContent:null,setEditingFileContent:e=>a("editingFileContent",e),activeRevisionId:r,setActiveRevisionId:e=>a("activeRevisionId",e),activeFileId:o||n,setActiveFileId:e=>a("activeFileId",e),isHistoryOpen:!1,setIsHistoryOpen:e=>a("isHistoryOpen",e),canPreview:!0,setCanPreview:e=>a("canPreview",e),isPreviewingHistory:!1,setIsPreviewingHistory:e=>a("isPreviewingHistory",e)})}}})}));var p=e.i(932),m=e.i(24174);e.i(47167);var v=e.i(33710),f=e.i(69637),h=e.i(54440),g=e.i(91476),y=e.i(55689),w=e.i(72783),x=e.i(95187);let S=(0,x.createServerReference)("40c3bfc311e28c582a229952cc3dd15847c26459a4",x.callServer,void 0,x.findSourceMapURL,"revalidatePublishedProject");e.s(["revalidatePublishedProject",()=>S],85847);var _=e.i(72811);function j(e){return e.messages}function b(e){return e.results}function I(e){if(e.next){let t=new URL(e.next).searchParams.get("page");return t?parseInt(t,10):void 0}}function C(e,t){return(!(0,g.isAxiosError)(t)||t.response?.status!==404)&&e<3}function E(){var e,s;let u,c,x=(0,n.useParams)().projectId,E=function(e){var r;let i,a,l,s,u,c,d,x,E,L,P,R,D,F,A,H,T,M,N,k,B,V,O,K,Q,U,q,Z,W,G,z,$,Y,X,J=(0,p.c)(108),ee=(0,t.useQueryClient)();J[0]!==e?(i={queryKey:["projects",e],queryFn:async()=>{try{return await (0,o.getProject)(e)}catch(e){throw(0,g.isAxiosError)(e)&&e.response?.status===404&&(0,n.notFound)(),e}},retry:C},J[0]=e,J[1]=i):i=J[1],J[2]!==e?(a={queryKey:["chats",{project:e}],queryFn:()=>(0,o.getAllChats)({project:e})},J[2]=e,J[3]=a):a=J[3],J[4]!==i||J[5]!==a?(l={queries:[i,a]},J[4]=i,J[5]=a,J[6]=l):l=J[6];let[et,er]=(0,m.useSuspenseQueries)(l),{data:en}=et,{data:ei}=er;if(0===ei.length)throw Error("Project must have at least one chat");let eo=ei[0].id;J[7]===Symbol.for("react.memo_cache_sentinel")?(s=["PUBLISHED","DEPLOYED"],J[7]=s):s=J[7],J[8]!==e?(u={project:e,ordering:"-created",exclude_revision_type:s},J[8]=e,J[9]=u):u=J[9];let ea=u;J[10]!==ea?(c={queries:[{queryKey:["revisions",ea],queryFn:()=>(0,o.getAllRevisions)(ea)}]},J[10]=ea,J[11]=c):c=J[11];let[el]=(0,m.useSuspenseQueries)(c),{data:es}=el;J[12]!==eo?(d={queryKey:["commits","infinite",{chat:eo,ordering:"-created"}],queryFn:e=>{let{pageParam:t}=e;return(0,o.getAllCommits)({page:t,chat:eo,ordering:"-created"})},initialPageParam:1,getNextPageParam:I},J[12]=eo,J[13]=d):d=J[13];let eu=(r=d,(0,f.useBaseQuery)({...r,enabled:!0,suspense:!0,throwOnError:h.defaultThrowOnError},v.InfiniteQueryObserver,void 0));J[14]!==eu.data.pages?(x=eu.data.pages.flatMap(b).reverse(),E=eu.data.pages[0]?.count??0,L=x.flatMap(j),J[14]=eu.data.pages,J[15]=x,J[16]=E,J[17]=L):(x=J[15],E=J[16],L=J[17]);let ec=L;J[18]===Symbol.for("react.memo_cache_sentinel")?(P=["commits","delete"],J[18]=P):P=J[18],J[19]!==eo||J[20]!==ee?(R=async e=>{let t=["commits","infinite",{chat:eo,ordering:"-created"}];await ee.cancelQueries({queryKey:t});let r=ee.getQueryData(t);return ee.setQueryData(t,t=>{if(t)return{...t,pages:t.pages.map(t=>({...t,results:t.results.filter(t=>t.id!==e)}))}}),{previousCommits:r}},D=(e,t,r)=>{let n=["commits","infinite",{chat:eo,ordering:"-created"}];r?.previousCommits&&ee.setQueryData(n,r.previousCommits)},J[19]=eo,J[20]=ee,J[21]=R,J[22]=D):(R=J[21],D=J[22]),J[23]!==ee?(F=()=>{ee.invalidateQueries({queryKey:["commits","infinite"]})},J[23]=ee,J[24]=F):F=J[24],J[25]!==R||J[26]!==D||J[27]!==F?(A={mutationKey:P,mutationFn:o.deleteCommit,onMutate:R,onError:D,onSuccess:F},J[25]=R,J[26]=D,J[27]=F,J[28]=A):A=J[28];let{mutateAsync:ed}=(0,_.useRosebudMutation)(A),{mutateAsync:ep}=(0,y.useCreateChat)();J[29]===Symbol.for("react.memo_cache_sentinel")?(H=["commits","delete"],J[29]=H):H=J[29],J[30]!==ee?(T={mutationKey:H,mutationFn:o.deleteCommits,onSettled:()=>{ee.invalidateQueries({queryKey:["chats"]}),ee.invalidateQueries({queryKey:["commits"]}),ee.invalidateQueries({queryKey:["messages"]})}},J[30]=ee,J[31]=T):T=J[31];let{mutateAsync:em}=(0,_.useRosebudMutation)(T);J[32]!==e?(M=["projects",e,"set_current_revision_for_project"],N=t=>(0,o.setCurrentRevisionForProject)(e,t),J[32]=e,J[33]=M,J[34]=N):(M=J[33],N=J[34]),J[35]!==e||J[36]!==ee?(k=()=>{ee.invalidateQueries({queryKey:["projects",e]}),ee.invalidateQueries({queryKey:["projects"]})},J[35]=e,J[36]=ee,J[37]=k):k=J[37],J[38]!==M||J[39]!==N||J[40]!==k?(B={mutationKey:M,mutationFn:N,onSuccess:k},J[38]=M,J[39]=N,J[40]=k,J[41]=B):B=J[41];let ev=(0,_.useRosebudMutation)(B);J[42]!==e?(V=["projects",e,"set_published_revision"],J[42]=e,J[43]=V):V=J[43],J[44]!==en||J[45]!==e?(O=()=>(0,o.publishRevision)(e,en.current_revision_id),J[44]=en,J[45]=e,J[46]=O):O=J[46],J[47]!==e||J[48]!==ee?(K=async()=>{ee.invalidateQueries({queryKey:["projects",e]}),ee.invalidateQueries({queryKey:["revisions"]}),await S(e),(0,w.logEventPublishRevision)()},J[47]=e,J[48]=ee,J[49]=K):K=J[49],J[50]!==V||J[51]!==O||J[52]!==K?(Q={mutationKey:V,mutationFn:O,onSuccess:K},J[50]=V,J[51]=O,J[52]=K,J[53]=Q):Q=J[53];let{mutateAsync:ef}=(0,_.useRosebudMutation)(Q);J[54]!==e?(U=["projects",e,"deploy_revision"],J[54]=e,J[55]=U):U=J[55],J[56]!==en||J[57]!==e?(q=()=>(0,o.deployRevision)(e,en.current_revision_id),J[56]=en,J[57]=e,J[58]=q):q=J[58],J[59]!==e||J[60]!==ee?(Z=async()=>{ee.invalidateQueries({queryKey:["projects",e]}),ee.invalidateQueries({queryKey:["revisions"]}),await S(e),(0,w.logEventDeployRevision)()},J[59]=e,J[60]=ee,J[61]=Z):Z=J[61],J[62]!==U||J[63]!==q||J[64]!==Z?(W={mutationKey:U,mutationFn:q,onSuccess:Z},J[62]=U,J[63]=q,J[64]=Z,J[65]=W):W=J[65];let{mutateAsync:eh}=(0,_.useRosebudMutation)(W);J[66]!==e?(G=["projects",e],z=t=>(0,o.updateProject)({...t,id:e}),J[66]=e,J[67]=G,J[68]=z):(G=J[67],z=J[68]),J[69]!==ee?($=(e,t,r)=>{let n="name"in r,i=e&&!!e.published_revision_id,o="code"in r||"code_backup"in r,a="preview_image"in r,l="description"in r;i&&(n||"published_code"in r||a||l)&&ee.invalidateQueries({queryKey:["published-projects"]}),(n||o||"messages"in r||a||l)&&ee.invalidateQueries({queryKey:["projects"]}),o&&ee.invalidateQueries({queryKey:["assets"]})},J[69]=ee,J[70]=$):$=J[70],J[71]!==G||J[72]!==z||J[73]!==$?(Y={mutationKey:G,mutationFn:z,onSettled:$},J[71]=G,J[72]=z,J[73]=$,J[74]=Y):Y=J[74];let{mutate:eg,mutateAsync:ey,isPending:ew,variables:ex}=(0,_.useRosebudMutation)(Y),eS=en;if(ew){let e,t,r,n;if(J[75]!==ex?(e=ex||{},J[75]=ex,J[76]=e):e=J[76],J[77]!==e?({preview_image:t,...r}=e,J[77]=e,J[78]=t,J[79]=r):(t=J[78],r=J[79]),J[80]!==en||J[81]!==r?(n={...en,...r},J[80]=en,J[81]=r,J[82]=n):n=J[82],eS=n,t){let e,r;J[83]!==t?(e=URL.createObjectURL(t),J[83]=t,J[84]=e):e=J[84],J[85]!==en||J[86]!==e?(r={...en,preview_image:e},J[85]=en,J[86]=e,J[87]=r):r=J[87],eS=r}}return J[88]!==ei||J[89]!==x||J[90]!==E||J[91]!==eu.fetchNextPage||J[92]!==eu.hasNextPage||J[93]!==eu.isFetchingNextPage||J[94]!==ep||J[95]!==eo||J[96]!==ed||J[97]!==em||J[98]!==eh||J[99]!==ew||J[100]!==ec||J[101]!==eS||J[102]!==ef||J[103]!==es.results||J[104]!==ev||J[105]!==eg||J[106]!==ey?(X={project:eS,updateProject:eg,updateProjectAsync:ey,isUpdating:ew,currentChatId:eo,createChatAsync:ep,chats:ei,commits:x,commitsCount:E,hasMoreCommits:eu.hasNextPage,isFetchingMoreCommits:eu.isFetchingNextPage,fetchMoreCommits:eu.fetchNextPage,deleteCommitsAsync:em,deleteCommitAsync:ed,messages:ec,revisions:es.results,setCurrentRevisionForProjectMutation:ev,publishCurrentRevisionAsync:ef,deployCurrentRevisionAsync:eh},J[88]=ei,J[89]=x,J[90]=E,J[91]=eu.fetchNextPage,J[92]=eu.hasNextPage,J[93]=eu.isFetchingNextPage,J[94]=ep,J[95]=eo,J[96]=ed,J[97]=em,J[98]=eh,J[99]=ew,J[100]=ec,J[101]=eS,J[102]=ef,J[103]=es.results,J[104]=ev,J[105]=eg,J[106]=ey,J[107]=X):X=J[107],X}(x),L=(0,t.useQueryClient)(),{data:P}=(0,r.useSuspenseQuery)({queryKey:["files",{revision:E.project.current_revision_id}],queryFn:()=>(0,o.getAllGenericFiles)({revision:E.project.current_revision_id})}),R=(e=E.project.current_revision_id,s=P[0],u=d(e=>e.createProjectSlice),(c=d(e=>e.projects[x]))||(u(x,e,s.id),d.getState().projects[x])),{commits:D,currentChatId:F,messages:A,project:H,setCurrentRevisionForProjectMutation:T}=E,{fakeMessage:M,incrementCanvasRerenderKey:N,setRuntimeError:k,setFakeMessage:B,setActiveRevisionId:V,setActiveFileId:O}=R,{data:K}=(0,r.useSuspenseQuery)({queryKey:["revisions",R.activeRevisionId],queryFn:()=>(0,o.getRevision)(R.activeRevisionId)}),{data:Q}=(0,r.useSuspenseQuery)({queryKey:["files",R.activeFileId],queryFn:()=>(0,o.getGenericFile)(R.activeFileId)}),{publishEvent:U}=(0,l.useCodeAppliedEventEmitter)(),q=(0,i.useCallback)(async(e,t,r)=>{let n={revision:r},i=await L.ensureQueryData({queryKey:["files",n],queryFn:()=>(0,o.getAllGenericFiles)(n)});return i.find(r=>r.name===e&&r.path===t)?.id||i[0].id},[L]);(0,i.useEffect)(()=>{let e=H.current_revision_id,t=R.activeRevisionId;R.isPreviewingHistory||e!==t&&(V(e),U(),(async()=>{O(await q(Q.name,Q.path,e))})())},[H.current_revision_id,R.activeRevisionId,R.isPreviewingHistory,Q.name,Q.path,V,O,q,U]),(0,i.useEffect)(()=>{if(!M)return;B(void 0);let e=A.at(-1),t=D.find(t=>t.id===e?.commit),r={id:crypto.randomUUID(),commit:t?.id||crypto.randomUUID(),data:{content:"I'm sorry, but I couldn't generate valid code based on your current prompt. Please rethink and try a different approach to prompting, so I can assist you in creating valid code effectively!",message_type:a.MessageType.ASSISTANT_CHAT_MESSAGE},created:new Date().toISOString(),modified:new Date().toISOString()};if(e&&t)L.setQueryData(["commits",t.id],{...t,messages:[...t.messages,r]});else if(F){let e={id:r.commit,chat:F,messages:[r],created:new Date().toISOString(),modified:new Date().toISOString()},t={count:0,next:null,previous:null,results:[]};L.setQueryData(["commits",{chat:F}],(r=t)=>({...r,results:[...r.results,e]}))}},[D,A,L]);let Z=(0,i.useCallback)(async(e,t,r)=>{await T.mutateAsync({revision_id:e,previous_revision_id:H.current_revision_id}),V(e),k(null);let n=t??Q.name,i=r??Q.path;O(await q(n,i,e))},[Q,H.current_revision_id,q,O,T,V,k]);return{...E,...R,activeFile:Q,activeRevision:K,handleReloadClick:()=>{k(null),N()},handleNewRevision:Z,findNextFileId:q}}e.s(["default",()=>E],14978),e.s([],80380)},51265,e=>{e.v({InfoButton:"BaseSelect-module-scss-module__sEoRmG__InfoButton",ItemRow:"BaseSelect-module-scss-module__sEoRmG__ItemRow",Viewport:"BaseSelect-module-scss-module__sEoRmG__Viewport",fadeAndScaleIn:"BaseSelect-module-scss-module__sEoRmG__fadeAndScaleIn",fadeAndScaleOut:"BaseSelect-module-scss-module__sEoRmG__fadeAndScaleOut",pulseBackground:"BaseSelect-module-scss-module__sEoRmG__pulseBackground",scaleIn:"BaseSelect-module-scss-module__sEoRmG__scaleIn",scaleOut:"BaseSelect-module-scss-module__sEoRmG__scaleOut"})},1697,99682,e=>{"use strict";var t=e.i(18050),r=e.i(932),n=e.i(71645),i=e.i(74080);function o(e,[t,r]){return Math.min(r,Math.max(t,e))}var a=e.i(81140),l=e.i(75830),s=e.i(20783),u=e.i(30030),c=e.i(86318),d=e.i(26330),p=e.i(3536),m=e.i(65491),v=e.i(10772),f=e.i(53660),h=e.i(74606),g=e.i(48425),y=e.i(91918),w=e.i(30207),x=e.i(69340),S=e.i(34620);function _(e){let t=n.useRef({value:e,previous:e});return n.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}e.s(["usePrevious",()=>_],99682);var j=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});n.forwardRef((e,r)=>(0,t.jsx)(g.Primitive.span,{...e,ref:r,style:{...j,...e.style}})).displayName="VisuallyHidden";var b=e.i(60209),I=e.i(85369),C=[" ","Enter","ArrowUp","ArrowDown"],E=[" ","Enter"],L="Select",[P,R,D]=(0,l.createCollection)(L),[F,A]=(0,u.createContextScope)(L,[D,f.createPopperScope]),H=(0,f.createPopperScope)(),[T,M]=F(L),[N,k]=F(L),B=e=>{let{__scopeSelect:r,children:i,open:o,defaultOpen:a,onOpenChange:l,value:s,defaultValue:u,onValueChange:d,dir:p,name:m,autoComplete:h,disabled:g,required:y,form:w}=e,S=H(r),[_,j]=n.useState(null),[b,I]=n.useState(null),[C,E]=n.useState(!1),R=(0,c.useDirection)(p),[D,F]=(0,x.useControllableState)({prop:o,defaultProp:a??!1,onChange:l,caller:L}),[A,M]=(0,x.useControllableState)({prop:s,defaultProp:u,onChange:d,caller:L}),k=n.useRef(null),B=!_||w||!!_.closest("form"),[V,O]=n.useState(new Set),K=Array.from(V).map(e=>e.props.value).join(";");return(0,t.jsx)(f.Root,{...S,children:(0,t.jsxs)(T,{required:y,scope:r,trigger:_,onTriggerChange:j,valueNode:b,onValueNodeChange:I,valueNodeHasChildren:C,onValueNodeHasChildrenChange:E,contentId:(0,v.useId)(),value:A,onValueChange:M,open:D,onOpenChange:F,dir:R,triggerPointerDownPosRef:k,disabled:g,children:[(0,t.jsx)(P.Provider,{scope:r,children:(0,t.jsx)(N,{scope:e.__scopeSelect,onNativeOptionAdd:n.useCallback(e=>{O(t=>new Set(t).add(e))},[]),onNativeOptionRemove:n.useCallback(e=>{O(t=>{let r=new Set(t);return r.delete(e),r})},[]),children:i})}),B?(0,t.jsxs)(ex,{"aria-hidden":!0,required:y,tabIndex:-1,name:m,autoComplete:h,value:A,onChange:e=>M(e.target.value),disabled:g,form:w,children:[void 0===A?(0,t.jsx)("option",{value:""}):null,Array.from(V)]},K):null]})})};B.displayName=L;var V="SelectTrigger",O=n.forwardRef((e,r)=>{let{__scopeSelect:i,disabled:o=!1,...l}=e,u=H(i),c=M(V,i),d=c.disabled||o,p=(0,s.useComposedRefs)(r,c.onTriggerChange),m=R(i),v=n.useRef("touch"),[h,y,w]=e_(e=>{let t=m().filter(e=>!e.disabled),r=t.find(e=>e.value===c.value),n=ej(t,e,r);void 0!==n&&c.onValueChange(n.value)}),x=e=>{d||(c.onOpenChange(!0),w()),e&&(c.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,t.jsx)(f.Anchor,{asChild:!0,...u,children:(0,t.jsx)(g.Primitive.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":eS(c.value)?"":void 0,...l,ref:p,onClick:(0,a.composeEventHandlers)(l.onClick,e=>{e.currentTarget.focus(),"mouse"!==v.current&&x(e)}),onPointerDown:(0,a.composeEventHandlers)(l.onPointerDown,e=>{v.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(x(e),e.preventDefault())}),onKeyDown:(0,a.composeEventHandlers)(l.onKeyDown,e=>{let t=""!==h.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||y(e.key),(!t||" "!==e.key)&&C.includes(e.key)&&(x(),e.preventDefault())})})})});O.displayName=V;var K="SelectValue",Q=n.forwardRef((e,r)=>{let{__scopeSelect:n,className:i,style:o,children:a,placeholder:l="",...u}=e,c=M(K,n),{onValueNodeHasChildrenChange:d}=c,p=void 0!==a,m=(0,s.useComposedRefs)(r,c.onValueNodeChange);return(0,S.useLayoutEffect)(()=>{d(p)},[d,p]),(0,t.jsx)(g.Primitive.span,{...u,ref:m,style:{pointerEvents:"none"},children:eS(c.value)?(0,t.jsx)(t.Fragment,{children:l}):a})});Q.displayName=K;var U=n.forwardRef((e,r)=>{let{__scopeSelect:n,children:i,...o}=e;return(0,t.jsx)(g.Primitive.span,{"aria-hidden":!0,...o,ref:r,children:i||"â–¼"})});U.displayName="SelectIcon";var q=e=>(0,t.jsx)(h.Portal,{asChild:!0,...e});q.displayName="SelectPortal";var Z="SelectContent",W=n.forwardRef((e,r)=>{let o=M(Z,e.__scopeSelect),[a,l]=n.useState();return((0,S.useLayoutEffect)(()=>{l(new DocumentFragment)},[]),o.open)?(0,t.jsx)(Y,{...e,ref:r}):a?i.createPortal((0,t.jsx)(G,{scope:e.__scopeSelect,children:(0,t.jsx)(P.Slot,{scope:e.__scopeSelect,children:(0,t.jsx)("div",{children:e.children})})}),a):null});W.displayName=Z;var[G,z]=F(Z),$=(0,y.createSlot)("SelectContent.RemoveScroll"),Y=n.forwardRef((e,r)=>{let{__scopeSelect:i,position:o="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,side:v,sideOffset:f,align:h,alignOffset:g,arrowPadding:y,collisionBoundary:w,collisionPadding:x,sticky:S,hideWhenDetached:_,avoidCollisions:j,...C}=e,E=M(Z,i),[L,P]=n.useState(null),[D,F]=n.useState(null),A=(0,s.useComposedRefs)(r,e=>P(e)),[H,T]=n.useState(null),[N,k]=n.useState(null),B=R(i),[V,O]=n.useState(!1),K=n.useRef(!1);n.useEffect(()=>{if(L)return(0,b.hideOthers)(L)},[L]),(0,p.useFocusGuards)();let Q=n.useCallback(e=>{let[t,...r]=B().map(e=>e.ref.current),[n]=r.slice(-1),i=document.activeElement;for(let r of e)if(r===i||(r?.scrollIntoView({block:"nearest"}),r===t&&D&&(D.scrollTop=0),r===n&&D&&(D.scrollTop=D.scrollHeight),r?.focus(),document.activeElement!==i))return},[B,D]),U=n.useCallback(()=>Q([H,L]),[Q,H,L]);n.useEffect(()=>{V&&U()},[V,U]);let{onOpenChange:q,triggerPointerDownPosRef:W}=E;n.useEffect(()=>{if(L){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(W.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(W.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():L.contains(r.target)||q(!1),document.removeEventListener("pointermove",t),W.current=null};return null!==W.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[L,q,W]),n.useEffect(()=>{let e=()=>q(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[q]);let[z,Y]=e_(e=>{let t=B().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),n=ej(t,e,r);n&&setTimeout(()=>n.ref.current.focus())}),ee=n.useCallback((e,t,r)=>{let n=!K.current&&!r;(void 0!==E.value&&E.value===t||n)&&(T(e),n&&(K.current=!0))},[E.value]),et=n.useCallback(()=>L?.focus(),[L]),er=n.useCallback((e,t,r)=>{let n=!K.current&&!r;(void 0!==E.value&&E.value===t||n)&&k(e)},[E.value]),en="popper"===o?J:X,ei=en===J?{side:v,sideOffset:f,align:h,alignOffset:g,arrowPadding:y,collisionBoundary:w,collisionPadding:x,sticky:S,hideWhenDetached:_,avoidCollisions:j}:{};return(0,t.jsx)(G,{scope:i,content:L,viewport:D,onViewportChange:F,itemRefCallback:ee,selectedItem:H,onItemLeave:et,itemTextRefCallback:er,focusSelectedItem:U,selectedItemText:N,position:o,isPositioned:V,searchRef:z,children:(0,t.jsx)(I.RemoveScroll,{as:$,allowPinchZoom:!0,children:(0,t.jsx)(m.FocusScope,{asChild:!0,trapped:E.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,a.composeEventHandlers)(l,e=>{E.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,t.jsx)(d.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:(0,t.jsx)(en,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:e=>e.preventDefault(),...C,...ei,onPlaced:()=>O(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:(0,a.composeEventHandlers)(C.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||Y(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=B().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout(()=>Q(t)),e.preventDefault()}})})})})})})});Y.displayName="SelectContentImpl";var X=n.forwardRef((e,r)=>{let{__scopeSelect:i,onPlaced:a,...l}=e,u=M(Z,i),c=z(Z,i),[d,p]=n.useState(null),[m,v]=n.useState(null),f=(0,s.useComposedRefs)(r,e=>v(e)),h=R(i),y=n.useRef(!1),w=n.useRef(!0),{viewport:x,selectedItem:_,selectedItemText:j,focusSelectedItem:b}=c,I=n.useCallback(()=>{if(u.trigger&&u.valueNode&&d&&m&&x&&_&&j){let e=u.trigger.getBoundingClientRect(),t=m.getBoundingClientRect(),r=u.valueNode.getBoundingClientRect(),n=j.getBoundingClientRect();if("rtl"!==u.dir){let i=n.left-t.left,a=r.left-i,l=e.left-a,s=e.width+l,u=Math.max(s,t.width),c=o(a,[10,Math.max(10,window.innerWidth-10-u)]);d.style.minWidth=s+"px",d.style.left=c+"px"}else{let i=t.right-n.right,a=window.innerWidth-r.right-i,l=window.innerWidth-e.right-a,s=e.width+l,u=Math.max(s,t.width),c=o(a,[10,Math.max(10,window.innerWidth-10-u)]);d.style.minWidth=s+"px",d.style.right=c+"px"}let i=h(),l=window.innerHeight-20,s=x.scrollHeight,c=window.getComputedStyle(m),p=parseInt(c.borderTopWidth,10),v=parseInt(c.paddingTop,10),f=parseInt(c.borderBottomWidth,10),g=p+v+s+parseInt(c.paddingBottom,10)+f,w=Math.min(5*_.offsetHeight,g),S=window.getComputedStyle(x),b=parseInt(S.paddingTop,10),I=parseInt(S.paddingBottom,10),C=e.top+e.height/2-10,E=_.offsetHeight/2,L=p+v+(_.offsetTop+E);if(L<=C){let e=i.length>0&&_===i[i.length-1].ref.current;d.style.bottom="0px";let t=Math.max(l-C,E+(e?I:0)+(m.clientHeight-x.offsetTop-x.offsetHeight)+f);d.style.height=L+t+"px"}else{let e=i.length>0&&_===i[0].ref.current;d.style.top="0px";let t=Math.max(C,p+x.offsetTop+(e?b:0)+E);d.style.height=t+(g-L)+"px",x.scrollTop=L-C+x.offsetTop}d.style.margin="10px 0",d.style.minHeight=w+"px",d.style.maxHeight=l+"px",a?.(),requestAnimationFrame(()=>y.current=!0)}},[h,u.trigger,u.valueNode,d,m,x,_,j,u.dir,a]);(0,S.useLayoutEffect)(()=>I(),[I]);let[C,E]=n.useState();(0,S.useLayoutEffect)(()=>{m&&E(window.getComputedStyle(m).zIndex)},[m]);let L=n.useCallback(e=>{e&&!0===w.current&&(I(),b?.(),w.current=!1)},[I,b]);return(0,t.jsx)(ee,{scope:i,contentWrapper:d,shouldExpandOnScrollRef:y,onScrollButtonChange:L,children:(0,t.jsx)("div",{ref:p,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:(0,t.jsx)(g.Primitive.div,{...l,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});X.displayName="SelectItemAlignedPosition";var J=n.forwardRef((e,r)=>{let{__scopeSelect:n,align:i="start",collisionPadding:o=10,...a}=e,l=H(n);return(0,t.jsx)(f.Content,{...l,...a,ref:r,align:i,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});J.displayName="SelectPopperPosition";var[ee,et]=F(Z,{}),er="SelectViewport",en=n.forwardRef((e,r)=>{let{__scopeSelect:i,nonce:o,...l}=e,u=z(er,i),c=et(er,i),d=(0,s.useComposedRefs)(r,u.onViewportChange),p=n.useRef(0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),(0,t.jsx)(P.Slot,{scope:i,children:(0,t.jsx)(g.Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:(0,a.composeEventHandlers)(l.onScroll,e=>{let t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=c;if(n?.current&&r){let e=Math.abs(p.current-t.scrollTop);if(e>0){let n=window.innerHeight-20,i=Math.max(parseFloat(r.style.minHeight),parseFloat(r.style.height));if(i<n){let o=i+e,a=Math.min(n,o),l=o-a;r.style.height=a+"px","0px"===r.style.bottom&&(t.scrollTop=l>0?l:0,r.style.justifyContent="flex-end")}}}p.current=t.scrollTop})})})]})});en.displayName=er;var ei="SelectGroup",[eo,ea]=F(ei),el=n.forwardRef((e,r)=>{let{__scopeSelect:n,...i}=e,o=(0,v.useId)();return(0,t.jsx)(eo,{scope:n,id:o,children:(0,t.jsx)(g.Primitive.div,{role:"group","aria-labelledby":o,...i,ref:r})})});el.displayName=ei;var es="SelectLabel";n.forwardRef((e,r)=>{let{__scopeSelect:n,...i}=e,o=ea(es,n);return(0,t.jsx)(g.Primitive.div,{id:o.id,...i,ref:r})}).displayName=es;var eu="SelectItem",[ec,ed]=F(eu),ep=n.forwardRef((e,r)=>{let{__scopeSelect:i,value:o,disabled:l=!1,textValue:u,...c}=e,d=M(eu,i),p=z(eu,i),m=d.value===o,[f,h]=n.useState(u??""),[y,w]=n.useState(!1),x=(0,s.useComposedRefs)(r,e=>p.itemRefCallback?.(e,o,l)),S=(0,v.useId)(),_=n.useRef("touch"),j=()=>{l||(d.onValueChange(o),d.onOpenChange(!1))};if(""===o)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,t.jsx)(ec,{scope:i,value:o,disabled:l,textId:S,isSelected:m,onItemTextChange:n.useCallback(e=>{h(t=>t||(e?.textContent??"").trim())},[]),children:(0,t.jsx)(P.ItemSlot,{scope:i,value:o,disabled:l,textValue:f,children:(0,t.jsx)(g.Primitive.div,{role:"option","aria-labelledby":S,"data-highlighted":y?"":void 0,"aria-selected":m&&y,"data-state":m?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...c,ref:x,onFocus:(0,a.composeEventHandlers)(c.onFocus,()=>w(!0)),onBlur:(0,a.composeEventHandlers)(c.onBlur,()=>w(!1)),onClick:(0,a.composeEventHandlers)(c.onClick,()=>{"mouse"!==_.current&&j()}),onPointerUp:(0,a.composeEventHandlers)(c.onPointerUp,()=>{"mouse"===_.current&&j()}),onPointerDown:(0,a.composeEventHandlers)(c.onPointerDown,e=>{_.current=e.pointerType}),onPointerMove:(0,a.composeEventHandlers)(c.onPointerMove,e=>{_.current=e.pointerType,l?p.onItemLeave?.():"mouse"===_.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,a.composeEventHandlers)(c.onPointerLeave,e=>{e.currentTarget===document.activeElement&&p.onItemLeave?.()}),onKeyDown:(0,a.composeEventHandlers)(c.onKeyDown,e=>{(p.searchRef?.current===""||" "!==e.key)&&(E.includes(e.key)&&j()," "===e.key&&e.preventDefault())})})})})});ep.displayName=eu;var em="SelectItemText",ev=n.forwardRef((e,r)=>{let{__scopeSelect:o,className:a,style:l,...u}=e,c=M(em,o),d=z(em,o),p=ed(em,o),m=k(em,o),[v,f]=n.useState(null),h=(0,s.useComposedRefs)(r,e=>f(e),p.onItemTextChange,e=>d.itemTextRefCallback?.(e,p.value,p.disabled)),y=v?.textContent,w=n.useMemo(()=>(0,t.jsx)("option",{value:p.value,disabled:p.disabled,children:y},p.value),[p.disabled,p.value,y]),{onNativeOptionAdd:x,onNativeOptionRemove:_}=m;return(0,S.useLayoutEffect)(()=>(x(w),()=>_(w)),[x,_,w]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Primitive.span,{id:p.textId,...u,ref:h}),p.isSelected&&c.valueNode&&!c.valueNodeHasChildren?i.createPortal(u.children,c.valueNode):null]})});ev.displayName=em;var ef="SelectItemIndicator";n.forwardRef((e,r)=>{let{__scopeSelect:n,...i}=e;return ed(ef,n).isSelected?(0,t.jsx)(g.Primitive.span,{"aria-hidden":!0,...i,ref:r}):null}).displayName=ef;var eh="SelectScrollUpButton";n.forwardRef((e,r)=>{let i=z(eh,e.__scopeSelect),o=et(eh,e.__scopeSelect),[a,l]=n.useState(!1),u=(0,s.useComposedRefs)(r,o.onScrollButtonChange);return(0,S.useLayoutEffect)(()=>{if(i.viewport&&i.isPositioned){let e=function(){l(t.scrollTop>0)},t=i.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[i.viewport,i.isPositioned]),a?(0,t.jsx)(ey,{...e,ref:u,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=i;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null}).displayName=eh;var eg="SelectScrollDownButton";n.forwardRef((e,r)=>{let i=z(eg,e.__scopeSelect),o=et(eg,e.__scopeSelect),[a,l]=n.useState(!1),u=(0,s.useComposedRefs)(r,o.onScrollButtonChange);return(0,S.useLayoutEffect)(()=>{if(i.viewport&&i.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;l(Math.ceil(t.scrollTop)<e)},t=i.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[i.viewport,i.isPositioned]),a?(0,t.jsx)(ey,{...e,ref:u,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=i;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null}).displayName=eg;var ey=n.forwardRef((e,r)=>{let{__scopeSelect:i,onAutoScroll:o,...l}=e,s=z("SelectScrollButton",i),u=n.useRef(null),c=R(i),d=n.useCallback(()=>{null!==u.current&&(window.clearInterval(u.current),u.current=null)},[]);return n.useEffect(()=>()=>d(),[d]),(0,S.useLayoutEffect)(()=>{let e=c().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[c]),(0,t.jsx)(g.Primitive.div,{"aria-hidden":!0,...l,ref:r,style:{flexShrink:0,...l.style},onPointerDown:(0,a.composeEventHandlers)(l.onPointerDown,()=>{null===u.current&&(u.current=window.setInterval(o,50))}),onPointerMove:(0,a.composeEventHandlers)(l.onPointerMove,()=>{s.onItemLeave?.(),null===u.current&&(u.current=window.setInterval(o,50))}),onPointerLeave:(0,a.composeEventHandlers)(l.onPointerLeave,()=>{d()})})});n.forwardRef((e,r)=>{let{__scopeSelect:n,...i}=e;return(0,t.jsx)(g.Primitive.div,{"aria-hidden":!0,...i,ref:r})}).displayName="SelectSeparator";var ew="SelectArrow";n.forwardRef((e,r)=>{let{__scopeSelect:n,...i}=e,o=H(n),a=M(ew,n),l=z(ew,n);return a.open&&"popper"===l.position?(0,t.jsx)(f.Arrow,{...o,...i,ref:r}):null}).displayName=ew;var ex=n.forwardRef(({__scopeSelect:e,value:r,...i},o)=>{let a=n.useRef(null),l=(0,s.useComposedRefs)(o,a),u=_(r);return n.useEffect(()=>{let e=a.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(u!==r&&t){let n=new Event("change",{bubbles:!0});t.call(e,r),e.dispatchEvent(n)}},[u,r]),(0,t.jsx)(g.Primitive.select,{...i,style:{...j,...i.style},ref:l,defaultValue:r})});function eS(e){return""===e||void 0===e}function e_(e){let t=(0,w.useCallbackRef)(e),r=n.useRef(""),i=n.useRef(0),o=n.useCallback(e=>{let n=r.current+e;t(n),function e(t){r.current=t,window.clearTimeout(i.current),""!==t&&(i.current=window.setTimeout(()=>e(""),1e3))}(n)},[t]),a=n.useCallback(()=>{r.current="",window.clearTimeout(i.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(i.current),[]),[r,o,a]}function ej(e,t,r){var n,i;let o=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=r?e.indexOf(r):-1,l=(n=e,i=Math.max(a,0),n.map((e,t)=>n[(i+t)%n.length]));1===o.length&&(l=l.filter(e=>e!==r));let s=l.find(e=>e.textValue.toLowerCase().startsWith(o.toLowerCase()));return s!==r?s:void 0}ex.displayName="SelectBubbleInput";var eb=e.i(86336),eI=e.i(42464),eC=e.i(25763),eE=e.i(77485),eL=e.i(75570),eP=e.i(51265);function eR(e){let i,o,a,l,s,u,c,d,p,m,v,f,h,g=(0,r.c)(48),{value:y,options:w,onChange:x,disabled:S,align:_,classNames:j,ariaLabel:b,showArrow:I,playSound:C,tooltipSide:E,useClickTooltips:L}=e,P=void 0!==S&&S,R=void 0===_?"start":_;g[0]!==j?(i=void 0===j?{}:j,g[0]=j,g[1]=i):i=g[1];let D=i,F=void 0===I||I,A=void 0===C||C,H=void 0===E?"right":E,T=void 0!==L&&L,M=(0,n.useRef)(null),[N,k]=(0,n.useState)(!1),[V,K]=(0,n.useState)(null),Z=w[y];g[2]!==A?(o=e=>{if(e)k(e);else{var t;t=M.current,t.addEventListener("animationend",function r(){(()=>k(e))(),t.removeEventListener("animationend",r)}),t.dataset.state="closed",K(null)}A&&(0,eC.playClick)()},g[2]=A,g[3]=o):o=g[3];let G=o;g[4]!==w?(a=Object.entries(w),g[4]=w,g[5]=a):a=g[5];let z=a;g[6]!==x?(l=e=>{e&&x(e)},g[6]=x,g[7]=l):l=g[7];let $=b||y;g[8]!==Z.Icon||g[9]!==D.valueIcon?(s=Z.Icon&&(0,t.jsx)(Z.Icon,{className:D.valueIcon}),g[8]=Z.Icon,g[9]=D.valueIcon,g[10]=s):s=g[10];let Y=Z.triggerLabel??Z.label;g[11]!==D.value||g[12]!==s||g[13]!==Y?(u=(0,t.jsxs)("div",{className:D.value,children:[s,Y]}),g[11]=D.value,g[12]=s,g[13]=Y,g[14]=u):u=g[14],g[15]!==u||g[16]!==y?(c=(0,t.jsx)(Q,{"aria-label":y,asChild:!0,children:u}),g[15]=u,g[16]=y,g[17]=c):c=g[17],g[18]!==D.icon||g[19]!==F?(d=F&&(0,t.jsx)(U,{className:D.icon,children:(0,t.jsx)(eI.default,{})}),g[18]=D.icon,g[19]=F,g[20]=d):d=g[20],g[21]!==D.trigger||g[22]!==$||g[23]!==c||g[24]!==d?(p=(0,t.jsxs)(O,{className:D.trigger,"aria-label":$,children:[c,d]}),g[21]=D.trigger,g[22]=$,g[23]=c,g[24]=d,g[25]=p):p=g[25];let X=D.content,J=D.group;return g[26]!==D.item||g[27]!==D.itemIcon||g[28]!==V||g[29]!==z||g[30]!==H||g[31]!==T?(m=z.map(e=>{let[r,i]=e,o=V===r,a=T&&i.tooltip,l=(0,t.jsxs)(ep,{value:r,className:D.item,children:[i.Icon&&(0,t.jsx)(i.Icon,{className:D.itemIcon}),(0,t.jsx)(ev,{children:i.label})]}),s=a?(0,t.jsxs)("div",{className:eP.default.ItemRow,children:[l,(0,t.jsx)("button",{type:"button",className:eP.default.InfoButton,onClick:e=>{e.stopPropagation(),K(o?null:r)},"aria-label":o?"Hide info":"Show info",children:(0,t.jsx)(eE.default,{})})]}):l;return i.tooltip?(0,t.jsxs)(eb.Root,{delayDuration:300*!T,open:T?o:void 0,children:[(0,t.jsx)(eb.Trigger,{asChild:!0,children:s}),(0,t.jsx)(eb.Portal,{children:(0,t.jsxs)(eb.Content,{className:eL.default.Tooltip,sideOffset:5,side:H,collisionPadding:10,children:[i.tooltip,(0,t.jsx)(eb.Arrow,{className:eL.default.TooltipArrow})]})})]},r):(0,t.jsx)(n.default.Fragment,{children:s},r)}),g[26]=D.item,g[27]=D.itemIcon,g[28]=V,g[29]=z,g[30]=H,g[31]=T,g[32]=m):m=g[32],g[33]!==D.group||g[34]!==m?(v=(0,t.jsx)(en,{className:eP.default.Viewport,children:(0,t.jsx)(el,{className:J,children:m})}),g[33]=D.group,g[34]=m,g[35]=v):v=g[35],g[36]!==R||g[37]!==D.content||g[38]!==v?(f=(0,t.jsx)(q,{children:(0,t.jsx)(W,{ref:M,className:X,position:"popper",align:R,children:v})}),g[36]=R,g[37]=D.content,g[38]=v,g[39]=f):f=g[39],g[40]!==P||g[41]!==G||g[42]!==N||g[43]!==l||g[44]!==p||g[45]!==f||g[46]!==y?(h=(0,t.jsx)(eb.Provider,{children:(0,t.jsxs)(B,{value:y,onValueChange:l,open:N,onOpenChange:G,disabled:P,children:[p,f]})}),g[40]=P,g[41]=G,g[42]=N,g[43]=l,g[44]=p,g[45]=f,g[46]=y,g[47]=h):h=g[47],h}e.s(["BaseSelect",()=>eR],1697)},23089,e=>{"use strict";var t=e.i(18050),r=e.i(932),n=e.i(78845);e.s(["ArrowRight",0,()=>{let e,i=(0,r.c)(1);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("svg",{width:n.DEFAULT_SIZE,height:n.DEFAULT_SIZE,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M-2.99735e-07 9.14286L-3.99647e-07 6.85714L11.5 6.85714L11.5 4.57143L13.75 4.57143L13.75 6.85714L16 6.85714L16 9.14286L13.75 9.14286L13.75 11.4286L11.5 11.4286L11.5 9.14286L-2.99735e-07 9.14286ZM9.25 13.7143L11.5 13.7143L11.5 11.4286L9.25 11.4286L9.25 13.7143ZM9.25 13.7143L7 13.7143L7 16L9.25 16L9.25 13.7143ZM9.25 2.28571L11.5 2.28571L11.5 4.57143L9.25 4.57143L9.25 2.28571ZM9.25 2.28571L7 2.28571L7 -3.0598e-07L9.25 -4.0433e-07L9.25 2.28571Z"})}),i[0]=e):e=i[0],e}])},81234,e=>{"use strict";var t=e.i(18050),r=e.i(932),n=e.i(78845);e.s(["ChevronRight",0,()=>{let e,i=(0,r.c)(1);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("svg",{width:n.DEFAULT_SIZE,height:n.DEFAULT_SIZE,viewBox:"0 0 6 10",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.333252 0.333313L0.333252 1.66665L1.66659 1.66665L1.66659 0.333313L0.333252 0.333313ZM2.99992 2.99998L2.99992 1.66665L1.66659 1.66665L1.66659 2.99998L2.99992 2.99998ZM4.33325 4.33331L4.33325 2.99998L2.99992 2.99998L2.99992 4.33331L4.33325 4.33331ZM4.33325 5.66665L5.66659 5.66665L5.66659 4.33331L4.33325 4.33331L4.33325 5.66665ZM2.99992 6.99998L2.99992 5.66665L4.33325 5.66665L4.33325 6.99998L2.99992 6.99998ZM2.99992 6.99998L1.66659 6.99998L1.66659 8.33331L2.99992 8.33331L2.99992 6.99998ZM0.333252 9.66665L0.333252 8.33331L1.66659 8.33331L1.66659 9.66665L0.333252 9.66665Z",fill:"currentColor"})}),i[0]=e):e=i[0],e}])}]);